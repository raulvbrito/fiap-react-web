{"remainingRequest":"/Users/raulvbrito/Projects/Web/fiap-17mob-project-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/raulvbrito/Projects/Web/fiap-17mob-project-vue/src/views/SignUp.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/raulvbrito/Projects/Web/fiap-17mob-project-vue/src/views/SignUp.vue","mtime":1558904188000},{"path":"/Users/raulvbrito/Projects/Web/fiap-17mob-project-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/raulvbrito/Projects/Web/fiap-17mob-project-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport firebase from \"firebase\";\r\nimport $ from \"jquery\";\r\nimport { constants } from \"crypto\";\r\nexport default {\r\n  name: \"signUp\",\r\n  data: () => {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n      cep: \"\",\r\n      endereco: {\r\n        cep: \"\",\r\n        logradouro: \"\",\r\n        numero: \"\",\r\n        complemento: \"\",\r\n        bairro: \"\",\r\n        localidade: \"\",\r\n        uf: \"\"\r\n      },\r\n      naoLocalizado: false\r\n    };\r\n  },\r\n  methods: {\r\n    signUp: function() {\r\n\r\n      // validate\r\n      if (\r\n        this.email &&\r\n        this.password &&\r\n        this.endereco.cep &&\r\n        this.endereco.logradouro &&\r\n        this.endereco.numero &&\r\n        this.endereco.bairro &&\r\n        this.endereco.localidade &&\r\n        this.endereco.uf\r\n      ) {\r\n        firebase\r\n          .auth()\r\n          .createUserWithEmailAndPassword(this.email, this.password)\r\n          .then(\r\n            user => {\r\n              console.log(user);\r\n              var userLogado = firebase.auth().currentUser;\r\n              console.log(\"UID usuário logado: \" + userLogado.uid);\r\n              console.log(\"Endereço atualizado: \", this.endereco);\r\n              firebase\r\n                .database()\r\n                .ref(\"users/\" + userLogado.uid)\r\n                .set(this.endereco);\r\n              console.log(this.endereco.logradouro);\r\n              console.log(\"Usuário criado e autenticado\");\r\n              this.$router.replace(\"home\");\r\n            },\r\n            err => {\r\n              alert(\"Oops. \" + err.message);\r\n            }\r\n          );\r\n      } else {\r\n        alert(\"Por favor preencha todos os campos \");\r\n      }\r\n    },\r\n    buscar: function() {\r\n      if (this.cep.length == 8) {\r\n        this.naoLocalizado = false;\r\n\r\n        if (/^[0-9]{8}$/.test(this.cep)) {\r\n          $.getJSON(\"https://viacep.com.br/ws/\" + this.cep + \"/json/\", function(\r\n            enderecoRetornado\r\n          ) {\r\n            if (enderecoRetornado.erro) {\r\n              this.endereco = {};\r\n              this.naoLocalizado = true;\r\n              return;\r\n            }\r\n            console.log(\"Atualizando endereço...\");\r\n            console.log(\"Endereço retornado: \", enderecoRetornado);\r\n            this.endereco = {\r\n              cep: enderecoRetornado.cep,\r\n              logradouro: enderecoRetornado.logradouro,\r\n              numero: \"\",\r\n              complemento: enderecoRetornado.complemento,\r\n              bairro: enderecoRetornado.bairro,\r\n              localidade: enderecoRetornado.localidade,\r\n              uf: enderecoRetornado.uf\r\n            };\r\n            console.log(\"Endereço interno atualizado: \", this.endereco);\r\n            localStorage.endereco = JSON.stringify(this.endereco);\r\n          });\r\n          if (localStorage.endereco) {\r\n            this.endereco = JSON.parse(localStorage.endereco);\r\n          }\r\n        } else {\r\n          alert(\r\n            \"Por favor preencher o campo CEP corretamente com 8 caracteres.\"\r\n          );\r\n        }\r\n      } else {\r\n        alert(\"Por favor preencher o campo CEP corretamente com 8 caracteres.\");\r\n      }\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["SignUp.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignUp.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"sign-up\">\r\n    <p>Vamos criar uma nova conta!</p>\r\n    <input type=\"text\" v-model=\"email\" placeholder=\"Email\">\r\n    <br>\r\n    <input type=\"password\" v-model=\"password\" placeholder=\"Senha\">\r\n    <br>\r\n    <p>Qual seu endereço?</p>\r\n    <input type=\"text\" maxlength=\"8\" pattern=\"([0-9]{8})\" v-model=\"cep\" placeholder=\"CEP\">\r\n    <br>\r\n    <button @click=\"buscar\">Buscar</button>\r\n    <br>\r\n    <br>\r\n    <br>\r\n    <label>Logradouro</label>\r\n    <br>\r\n    <input type=\"text\" v-model=\"endereco.logradouro\">\r\n    <br>\r\n    <label>Número</label>\r\n    <br>\r\n    <input type=\"number\" v-model=\"endereco.numero\">\r\n    <br>\r\n    <label>Complemento</label>\r\n    <br>\r\n    <input type=\"text\" v-model=\"endereco.complemento\">\r\n    <br>\r\n    <label>Bairro</label>\r\n    <br>\r\n    <input type=\"text\" v-model=\"endereco.bairro\">\r\n    <br>\r\n    <label>Cidade</label>\r\n    <br>\r\n    <input type=\"text\" v-model=\"endereco.localidade\">\r\n    <br>\r\n    <label>Estado</label>\r\n    <br>\r\n    <input type=\"text\" v-model=\"endereco.uf\">\r\n    <br>\r\n\r\n    <button @click=\"signUp\">Criar conta</button>\r\n\r\n    <span>\r\n      ou voltar para\r\n      <router-link to=\"/login\">Login</router-link>.\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n <script>\r\nimport firebase from \"firebase\";\r\nimport $ from \"jquery\";\r\nimport { constants } from \"crypto\";\r\nexport default {\r\n  name: \"signUp\",\r\n  data: () => {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n      cep: \"\",\r\n      endereco: {\r\n        cep: \"\",\r\n        logradouro: \"\",\r\n        numero: \"\",\r\n        complemento: \"\",\r\n        bairro: \"\",\r\n        localidade: \"\",\r\n        uf: \"\"\r\n      },\r\n      naoLocalizado: false\r\n    };\r\n  },\r\n  methods: {\r\n    signUp: function() {\r\n\r\n      // validate\r\n      if (\r\n        this.email &&\r\n        this.password &&\r\n        this.endereco.cep &&\r\n        this.endereco.logradouro &&\r\n        this.endereco.numero &&\r\n        this.endereco.bairro &&\r\n        this.endereco.localidade &&\r\n        this.endereco.uf\r\n      ) {\r\n        firebase\r\n          .auth()\r\n          .createUserWithEmailAndPassword(this.email, this.password)\r\n          .then(\r\n            user => {\r\n              console.log(user);\r\n              var userLogado = firebase.auth().currentUser;\r\n              console.log(\"UID usuário logado: \" + userLogado.uid);\r\n              console.log(\"Endereço atualizado: \", this.endereco);\r\n              firebase\r\n                .database()\r\n                .ref(\"users/\" + userLogado.uid)\r\n                .set(this.endereco);\r\n              console.log(this.endereco.logradouro);\r\n              console.log(\"Usuário criado e autenticado\");\r\n              this.$router.replace(\"home\");\r\n            },\r\n            err => {\r\n              alert(\"Oops. \" + err.message);\r\n            }\r\n          );\r\n      } else {\r\n        alert(\"Por favor preencha todos os campos \");\r\n      }\r\n    },\r\n    buscar: function() {\r\n      if (this.cep.length == 8) {\r\n        this.naoLocalizado = false;\r\n\r\n        if (/^[0-9]{8}$/.test(this.cep)) {\r\n          $.getJSON(\"https://viacep.com.br/ws/\" + this.cep + \"/json/\", function(\r\n            enderecoRetornado\r\n          ) {\r\n            if (enderecoRetornado.erro) {\r\n              this.endereco = {};\r\n              this.naoLocalizado = true;\r\n              return;\r\n            }\r\n            console.log(\"Atualizando endereço...\");\r\n            console.log(\"Endereço retornado: \", enderecoRetornado);\r\n            this.endereco = {\r\n              cep: enderecoRetornado.cep,\r\n              logradouro: enderecoRetornado.logradouro,\r\n              numero: \"\",\r\n              complemento: enderecoRetornado.complemento,\r\n              bairro: enderecoRetornado.bairro,\r\n              localidade: enderecoRetornado.localidade,\r\n              uf: enderecoRetornado.uf\r\n            };\r\n            console.log(\"Endereço interno atualizado: \", this.endereco);\r\n            localStorage.endereco = JSON.stringify(this.endereco);\r\n          });\r\n          if (localStorage.endereco) {\r\n            this.endereco = JSON.parse(localStorage.endereco);\r\n          }\r\n        } else {\r\n          alert(\r\n            \"Por favor preencher o campo CEP corretamente com 8 caracteres.\"\r\n          );\r\n        }\r\n      } else {\r\n        alert(\"Por favor preencher o campo CEP corretamente com 8 caracteres.\");\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n <style scoped>\r\n.sign-up {\r\n  margin-top: 40px;\r\n}\r\ninput {\r\n  margin: 10px 0;\r\n  width: 20%;\r\n  padding: 15px;\r\n}\r\nbutton {\r\n  margin-top: 10px;\r\n  width: 10%;\r\n  cursor: pointer;\r\n}\r\nspan {\r\n  display: block;\r\n  margin-top: 20px;\r\n  font-size: 11px;\r\n}\r\n.text-danger {\r\n  position: absolute;\r\n  top: 20px;\r\n  font-size: 12px;\r\n}\r\n</style>"]}]}